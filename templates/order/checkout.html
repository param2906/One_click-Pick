{% extends 'products/base.html' %}
{% load static %}
{% load widget_tweaks %}
{% block content %}
<div class="container">
    <h1 class="mb-4 display-5 font-weight-semi-bold" >Checkout Form</h1>
    
            <div class="contact-form">
                <div id="success"></div>
                {% for message in messages  %}
                <div class="alert {{message.tags}} alert-dismissible" role="alert">
                    <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"><span aria-hidden="true"></span></button>
                    <strong>{{message}}</strong>
                </div>
                {% endfor %}
                <form  action="" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    {% for field in form %}
                    {% if field.errors %}
    
                    <div class="alert alert-danger alert-dismissible" role="alert">
                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"><span aria-hidden="true"></span></button>
                        <strong>{{field.errors}}</strong>
                    </div>  
                    {% endif %}
                    {% endfor %}
                    <div class="row">
                        <div class="col-md-6 col-lg-6">
                            {{form.first_name.label}}
                            {% render_field form.first_name class="form-control mb-3" required="true" %}         
                            {{form.last_name.label}}
                            {% render_field form.last_name class="form-control mb-3" required="true" %}
                            {{form.phone.label}}
                            {% render_field form.phone class="form-control mb-3" required="true" %}
                            {{form.email.label}}
                            {% render_field form.email class="form-control mb-3" required="true" %}
                            {{form.address1.label}}
                            {% render_field form.address1 class="form-control mb-3" required="true" %}
                            {{form.address2.label}}
                            {% render_field form.address2 class="form-control mb-3" required="true" %}
                            <input type="text" name="created_by" value="{{request.user}}" class="form-control mb-3" required="" data-validation-required-message="Please enter your name" disabled="True" id="id_created_by">
                            <input class="btn btn-primary py-2 px-4" type="submit" value="Place Order" name="submit">
                        </div>
                        
                    </div>
                </form>
                    {% comment %} <form action="https://www.example.com/payment/success/" method="POST">
                        <script
                            src="https://checkout.razorpay.com/v1/checkout.js"
                            data-key="rzp_test_MzGOPtpU1Agb67" // Enter the Test API Key ID generated from Dashboard → Settings → API Keys
                            data-amount="{{order.total_price}}" // Amount is in currency subunits. Hence, 29935 refers to 29935 paise or ₹299.35.
                            data-currency="INR"// You can accept international payments by changing the currency code. Contact our Support Team to enable International for your account
                            data-order_id="{{order.id}}"// Replace with the order_id generated by you in the backend.
                            data-buttontext="Pay with Razorpay"
                            data-name="Acme Corp"
                            data-description="A Wild Sheep Chase is the third novel by Japanese author Haruki Murakami"
                            data-image="https://example.com/your_logo.jpg"
                            data-prefill.name="{{order.user.name}}"
                            data-prefill.email="{{order.user}}"
                            data-theme.color="#F37254"
                        ></script>
                        <input type="hidden" custom="Hidden Element" name="hidden"/>
                        </form> {% endcomment %}
                    
                
            </div>
</div>
{% endblock %}